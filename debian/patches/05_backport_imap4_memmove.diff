From 9597783b9d747b285a5e7ea1dcda328aa4be437f Mon Sep 17 00:00:00 2001
From: Allen Winter <winter@kde.org>
Date: Fri, 21 Jan 2011 16:55:50 +0000
Subject: [PATCH] Avoid overlapping memcpy in myRead() RB: 6389 MERGE: 4.5,4.4

svn path=/trunk/KDE/kdepimlibs/; revision=1216161
---
 kioslave/imap4/imap4.cpp |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

--- a/kioslave/imap4/imap4.cpp
+++ b/kioslave/imap4/imap4.cpp
@@ -2577,7 +2577,7 @@ ssize_t IMAP4Protocol::myRead(void *data
     ssize_t copyLen = (len < readBufferLen) ? len : readBufferLen;
     memcpy(data, readBuffer, copyLen);
     readBufferLen -= copyLen;
-    if (readBufferLen) memcpy(readBuffer, &readBuffer[copyLen], readBufferLen);
+    if (readBufferLen) memmove(readBuffer, &readBuffer[copyLen], readBufferLen);
     return copyLen;
   }
   if (!isConnected()) return 0;
